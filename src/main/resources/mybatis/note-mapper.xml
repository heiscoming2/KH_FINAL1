<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Note">
	
	<!-- 내가 받은 쪽지 목록 조회 -->
	<select id="receiveList" resultType="NoteDto">
		SELECT *
    	FROM NOTE
    	WHERE N_RECEIVER = 1005
	</select>
	
	<!-- 새로 받은 쪽지가 있는지 확인(매번) -->
	<select id="countNewNote" resultType="int">
	    SELECT COUNT(*)
	    FROM NOTE
	    WHERE N_RECEIVER = 1005
	    AND N_READDATE IS NULL
	</select>
	
    
    <!--  내가 받은쪽지 하나 읽기 -->
    <select id="receiveDetail" resultType="NoteDto">
	    SELECT *
	    FROM NOTE
	    WHERE n_receiver = 1004
	    AND N_NO=2
    </select>
    
   <!--  읽은 쪽지 읽은 시간 표시 UPDATE  -->
    <update id="updateReadDate">
	    UPDATE NOTE 
	    SET N_READDATE = SYSDATE
	     WHERE n_receiver = 1004
	    AND N_NO=2
    </update>
    
    <!-- 보낸쪽지 목록 -->
    <select id="sendList" resultType="NoteDto">
	    SELECT * 
	    FROM NOTE
	    WHERE N_SENDER = 1005
    </select>
    
   <!--  보낸 쪽지 하나 읽기  -->
    <select id="sendDetail" resultType="NoteDto">
	    SELECT * 
	    FROM NOTE
	    WHERE N_SENDER = 1005
	    AND N_NO=2
    </select>
    
</mapper>